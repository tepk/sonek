{"version":3,"sources":["../../src/__tests__/commands.unit.js"],"names":["describe","beforeEach","Object","keys","commands","prop","it","handler","spy","sinon","console","afterEach","restore","target","called"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEAA,SAAS,UAAT,EAAqB,YAAM;AACzBC,aAAW,YAAM;AAAA;AAAA;AAAA;;AAAA;AACf,2BAAmBC,OAAOC,IAAP,CAAYC,kBAAZ,CAAnB,8HAA0C;AAAA,YAA/BC,IAA+B;;AACxC,eAAOD,mBAASC,IAAT,CAAP;AACD;AAHc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIhB,GAJD;;AAMAL,WAAS,gBAAT,EAA2B,YAAM;AAC/BM,OAAG,wCAAH,EAA6C,YAAM;AACjD,eAASC,OAAT,GAAmB,CAAE;AACrB,8BAAgB,QAAhB,EAA0B,OAA1B,EAAmCA,OAAnC;AACA,4BAAOH,mBAAS,cAAT,MAA6BG,OAApC;AACD,KAJD;AAKD,GAND;;AAQAP,WAAS,0BAAT,EAAqC,YAAM;AACzC,QAAIQ,YAAJ;AACAP,eAAW,YAAM;AACfO,YAAMC,gBAAMD,GAAN,CAAUE,OAAV,EAAmB,KAAnB,CAAN;AACD,KAFD;AAGAC,cAAU,YAAM;AACdH,UAAII,OAAJ;AACD,KAFD;;AAIAN,OAAG,yCAAH,EAA8C,YAAM;AAClD,eAASO,MAAT,GAAkB,CAAE;AACpBT,yBAAS,qBAAT,IAAkCS,MAAlC;AACA,8CAAyB,QAAzB,EAAmC;AACjC,wBAAgB;AADiB,OAAnC;AAGA,4BAAOT,mBAAS,cAAT,MAA6BS,MAApC;AACD,KAPD;AAQAP,OAAG,wCAAH,EAA6C,YAAM;AACjD,eAASO,MAAT,GAAkB,CAAE;AACpBT,yBAAS,qBAAT,IAAkCS,MAAlC;;AAEA,8CAAyB,QAAzB,EAAmC;AACjC,wBAAgB;AADiB,OAAnC;AAGA,4BAAOT,mBAAS,cAAT,MAA6BS,MAApC;AACD,KARD;AASAP,OAAG,kDAAH,EAAuD,YAAM;AAC3D,8CAAyB,QAAzB,EAAmC;AACjC,wBAAgB;AADiB,OAAnC;AAGA,4BAAOE,IAAIM,MAAX;AACD,KALD;AAMD,GAhCD;AAiCD,CAhDD","file":"commands.unit.js","sourcesContent":["import registerCommand, { commands, registerCommandOverrides } from '../commands';\nimport assert from 'assert';\nimport sinon from 'sinon';\n\ndescribe('commands', () => {\n  beforeEach(() => {\n    for (const prop of Object.keys(commands)) {\n      delete commands[prop];\n    }\n  });\n\n  describe('registerCommad', () => {\n    it('should add command to list of commands', () => {\n      function handler() {}\n      registerCommand('docker', 'setup', handler);\n      assert(commands['docker.setup'] === handler);\n    });\n  });\n\n  describe('registerCommandOverrides', () => {\n    let spy;\n    beforeEach(() => {\n      spy = sinon.spy(console, 'log');\n    });\n    afterEach(() => {\n      spy.restore();\n    });\n\n    it('should add override to list of commands', () => {\n      function target() {}\n      commands['plugin.docker-setup'] = target;\n      registerCommandOverrides('plugin', {\n        'docker.setup': 'plugin.docker-setup'\n      });\n      assert(commands['docker.setup'] === target);\n    });\n    it('should support shorter override format', () => {\n      function target() {}\n      commands['plugin.docker-setup'] = target;\n\n      registerCommandOverrides('plugin', {\n        'docker.setup': 'docker-setup'\n      });\n      assert(commands['docker.setup'] === target);\n    });\n    it('should warn when override handler doesn\\'t exist', () => {\n      registerCommandOverrides('plugin', {\n        'docker.setup': 'docker-setup'\n      });\n      assert(spy.called);\n    });\n  });\n});\n"]}