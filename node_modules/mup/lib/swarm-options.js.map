{"version":3,"sources":["../src/swarm-options.js"],"names":["registerSwarmOptions","getOptions","_optionFunctions","optionFunction","push","config","reduce","result","labels","managers","Object","keys","forEach","host"],"mappings":";;;;;;;;;QAGgBA,oB,GAAAA,oB;QAIAC,U,GAAAA,U;;AAPhB;;;;AACO,IAAMC,8CAAmB,EAAzB;;AAEA,SAASF,oBAAT,CAA8BG,cAA9B,EAA8C;AACnDD,mBAAiBE,IAAjB,CAAsBD,cAAtB;AACD;;AAEM,SAASF,UAAT,CAAoBI,MAApB,EAA4B;AACjC,SAAOH,iBAAiBI,MAAjB,CAAwB,UAACC,MAAD,EAASJ,cAAT,EAA4B;AAAA,eAC5BA,eAAeE,MAAf,KAA0B,EADE;AAAA,QACjDG,MADiD,QACjDA,MADiD;AAAA,QACzCC,QADyC,QACzCA,QADyC;;AAEzD,QAAI,QAAOD,MAAP,yCAAOA,MAAP,OAAkB,QAAtB,EAAgC;AAC9BE,aAAOC,IAAP,CAAYH,MAAZ,EAAoBI,OAApB,CAA4B,gBAAQ;AAClCL,eAAOC,MAAP,CAAcK,IAAd,IAAsBN,OAAOC,MAAP,CAAcK,IAAd,KAAuB,EAA7C;AACAN,eAAOC,MAAP,CAAcK,IAAd,IAAsB,mBAAMN,OAAOC,MAAP,CAAcK,IAAd,CAAN,EAA2BL,OAAOK,IAAP,CAA3B,CAAtB;AACD,OAHD;AAID;;AAED,QAAIJ,QAAJ,EAAc;AAAA;;AACZ,iCAAOA,QAAP,EAAgBL,IAAhB,4CAAwBK,QAAxB;AACD;;AAED,WAAOF,MAAP;AACD,GAdM,EAcJ,EAAEC,QAAQ,EAAV,EAAcC,UAAU,EAAxB,EAdI,CAAP;AAeD","file":"swarm-options.js","sourcesContent":["import { merge } from 'lodash';\nexport const _optionFunctions = [];\n\nexport function registerSwarmOptions(optionFunction) {\n  _optionFunctions.push(optionFunction);\n}\n\nexport function getOptions(config) {\n  return _optionFunctions.reduce((result, optionFunction) => {\n    const { labels, managers } = optionFunction(config) || {};\n    if (typeof labels === 'object') {\n      Object.keys(labels).forEach(host => {\n        result.labels[host] = result.labels[host] || {};\n        result.labels[host] = merge(result.labels[host], labels[host]);\n      });\n    }\n\n    if (managers) {\n      result.managers.push(...managers);\n    }\n\n    return result;\n  }, { labels: {}, managers: [] });\n}\n"]}